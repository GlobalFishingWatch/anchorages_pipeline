version: '2'

services:
  anchorages_pipeline:
    image: gfw/pipe-anchorages
    build: .
    volumes:
      - ".:/opt/project"
      - "gcp:/root/.config/"

  frozen_dependencies:
    image: gfw/pipe-anchorages
    build: .
    entrypoint: ["cat","frozen_dependencies.txt"]

  py.test:
    entrypoint: ["py.test"]
    image: gfw/pipe-anchorages
    build: .
    volumes:
      - ".:/opt/project"
      - "gcp:/root/.config/"

  bash:
    image: gfw/pipe-anchorages
    build: .
    entrypoint: ["/bin/bash"]
    volumes:
      - ".:/opt/project"
      - "gcp:/root/.config/"

volumes:
  gcp:
    external: True
